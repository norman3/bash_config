;;------------------------------------------------------------------------------
;; kiho-hong emacs configuration file
;;------------------------------------------------------------------------------

;;------------------------------------------------------------------------------
;; remove startup message
;;------------------------------------------------------------------------------
(setq inhibit-startup-message t)

;;------------------------------------------------------------------------------
;; do not run default.el at starting.
;;------------------------------------------------------------------------------
(setq inhibit-default-init t)

;;------------------------------------------------------------------------------
;; print line-no
;;------------------------------------------------------------------------------
(setq column-number-mode t)

;;------------------------------------------------------------------------------
;; do not make backup file (tilde file)
;;------------------------------------------------------------------------------
(setq make-backup-files nil)

;;------------------------------------------------------------------------------
;; change title message
;;------------------------------------------------------------------------------
(setq frame-title-format (concat  "%b - emacs@" system-name))

;;------------------------------------------------------------------------------
;; use space instead of tab.
;;------------------------------------------------------------------------------
(setq-default indent-tabs-mode nil)

;;------------------------------------------------------------------------------
;; use 2 for tab-size
;;------------------------------------------------------------------------------
(setq-default tab-width 2)

;;------------------------------------------------------------------------------
;; set default elisp directory.
;;------------------------------------------------------------------------------
(add-to-list 'load-path "~/.emacs.d/lisp" t)

;;------------------------------------------------------------------------------
;; auto-relaod when current file is changed.
;;------------------------------------------------------------------------------
(global-auto-revert-mode 1)

;;------------------------------------------------------------------------------
;; ido : serve guide query with searching string.
;;------------------------------------------------------------------------------
(when (require 'ido "ido" t)
  (ido-mode 'buffer)
  (setq ido-enable-flex-matching t)
  (ido-mode t))

;;------------------------------------------------------------------------------
;; add melpa in elpa.
;;------------------------------------------------------------------------------
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/"))
(package-initialize)


;;------------------------------------------------------------------------------
;; user defined key map.
;;------------------------------------------------------------------------------
(global-set-key (kbd "C-x C-g") 'goto-line)
(global-set-key (kbd "C-x C-n") 'execute-extended-command)
(global-set-key (kbd "C-x C-b") 'bs-show)
(global-set-key (kbd "C-x ,")  'bs-cycle-next)
(global-set-key (kbd "C-x .")  'bs-cycle-previous)


;;------------------------------------------------------------------------------
;; python env setting
;;------------------------------------------------------------------------------
(add-hook 'python-mode-hook
          (lambda ()
            (setq indent-tabs-mode nil)
            (setq tab-width 2)
            (setq python-indent 2)))


;;------------------------------------------------------------------------------
;; set mode
;;------------------------------------------------------------------------------
(setq auto-mode-alist (mapcar 'purecopy
            '(("\\.c$"        . c++-mode)
              ("\\.h$"        . c++-mode)
              ("\\.C$"        . c++-mode)
              ("\\.cc$"       . c++-mode)
              ("\\.H$"        . c++-mode)
              ("\\.hh$"       . c++-mode)
              ("\\.cxx$"      . c++-mode)
              ("\\.hxx$"      . c++-mode)
              ("\\.cuh$"      . c++-mode)
              ("\\.cu$"       . c++-mode)
              ("\\.inl$"      . c++-mode)
              ("\\.cpp$"      . c++-mode)
              ("\\.cu$"       . c++-mode)
              ("\\.cuh$"      . c++-mode)
              ("\\.hpp$"      . c++-mode)
              ("\\.tex$"      . TeX-mode)
              ("\\.txi$"      . Texinfo-mode)
              ("\\.el$"       . emacs-lisp-mode)
              ("\\.sh$"       . sh-mode)
              ("\\.a$"        . c++-mode)
              ("\\.py$"       . python-mode)
              ("\\.java$"     . java-mode)
              ("\\.in$"       . sh-mode)
              ("\\.md$"       . markdown-mode)
              ("\\.pl$"       . prolog-mode)
              ("\\.proto$"    . c++-mode)
              ("\\.markdown$" . markdown-mode)
              ("\\.html$"     . html-mode)
              ("\\.yml$"      . yaml-mode)
              )))

;;------------------------------------------------------------------------------
;; default mode
;;------------------------------------------------------------------------------
(setq auto-mode-alist (append
             '(("/\\.[^/]*\\'" . sh-mode)) auto-mode-alist))


;;------------------------------------------------------------------------------
;; activate sh-mode for [.emacs] files
;;------------------------------------------------------------------------------
(setq auto-mode-alist (append
                       '((".emacs" . lisp-mode)) auto-mode-alist))
